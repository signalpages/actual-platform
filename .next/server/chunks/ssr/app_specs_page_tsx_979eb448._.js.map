{"version":3,"sources":["../../../../app/specs/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, Suspense } from 'react'; // Added Suspense for useSearchParams\r\nimport Link from 'next/link';\r\nimport { useSearchParams, useRouter } from 'next/navigation';\r\nimport { searchAssets, listCategories } from '@/lib/dataBridge.client';\r\nimport { Asset, Category } from '@/types';\r\n\r\nfunction SpecLedgerContent() {\r\n    const searchParams = useSearchParams();\r\n    const router = useRouter();\r\n    const statusTab = (searchParams.get('status') as 'verified' | 'provisional') || 'verified';\r\n\r\n    const [assets, setAssets] = useState<Asset[]>([]);\r\n    const [categories] = useState<Category[]>(listCategories());\r\n    const [brandFilter, setBrandFilter] = useState('all');\r\n    const [categoryFilter, setCategoryFilter] = useState('all');\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        const load = async () => {\r\n            setLoading(true);\r\n            // \"all\" is correctly handled by new dataBridge.client\r\n            const data = await searchAssets('', 'all', 'all');\r\n            setAssets(data);\r\n            setLoading(false);\r\n        };\r\n        load();\r\n    }, []);\r\n\r\n    const brands = Array.from(new Set(assets.map(a => a.brand))).sort();\r\n\r\n    const filteredAssets = assets.filter(a => {\r\n        const matchesBrand = brandFilter === 'all' || a.brand === brandFilter;\r\n        const matchesCategory = categoryFilter === 'all' || a.category === categoryFilter;\r\n        const matchesStatus = a.verification_status === statusTab;\r\n        return matchesBrand && matchesCategory && matchesStatus;\r\n    });\r\n\r\n    const handleTabChange = (status: 'verified' | 'provisional') => {\r\n        // Preserve other params if needed, or just switch status\r\n        // Simple V1 approach:\r\n        const params = new URLSearchParams(searchParams.toString());\r\n        params.set('status', status);\r\n        router.push(`/specs?${params.toString()}`);\r\n    };\r\n\r\n    return (\r\n        <main className=\"max-w-6xl mx-auto px-6 py-12\">\r\n            <header className=\"mb-12\">\r\n                <Link href=\"/\" className=\"inline-block bg-slate-900 text-white px-3 py-1 rounded text-[9px] font-black uppercase tracking-[0.2em] mb-4 hover:bg-slate-700 transition-colors\">\r\n                    Actual.fyi\r\n                </Link>\r\n                <h1 className=\"text-4xl font-black uppercase tracking-tighter text-slate-900 leading-none mb-4\">\r\n                    Technical Inventory\r\n                </h1>\r\n                <div className=\"flex gap-4 border-b border-slate-200\">\r\n                    <button\r\n                        onClick={() => handleTabChange('verified')}\r\n                        className={`pb-4 text-[10px] font-black uppercase tracking-widest transition-all relative ${statusTab === 'verified' ? 'text-blue-600' : 'text-slate-400 hover:text-slate-600'}`}\r\n                    >\r\n                        Verified Ledger\r\n                        {statusTab === 'verified' && <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-blue-600 rounded-full\"></div>}\r\n                    </button>\r\n                    <button\r\n                        onClick={() => handleTabChange('provisional')}\r\n                        className={`pb-4 text-[10px] font-black uppercase tracking-widest transition-all relative ${statusTab === 'provisional' ? 'text-amber-600' : 'text-slate-400 hover:text-slate-600'}`}\r\n                    >\r\n                        Provisional Index\r\n                        {statusTab === 'provisional' && <div className=\"absolute bottom-0 left-0 right-0 h-1 bg-amber-600 rounded-full\"></div>}\r\n                    </button>\r\n                </div>\r\n            </header>\r\n\r\n            <div className=\"mb-12 flex flex-wrap items-center gap-6\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    <label htmlFor=\"catFilter\" className=\"text-[9px] font-black uppercase tracking-widest text-slate-400\">Category</label>\r\n                    <select\r\n                        id=\"catFilter\"\r\n                        value={categoryFilter}\r\n                        onChange={(e) => setCategoryFilter(e.target.value)}\r\n                        className=\"p-3 pr-8 rounded-xl border border-slate-200 font-bold text-xs text-slate-700 bg-white focus:border-blue-600 outline-none transition-all\"\r\n                    >\r\n                        <option value=\"all\">All Domains</option>\r\n                        {categories.map(c => <option key={c.id} value={c.id}>{c.label}</option>)}\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"flex items-center gap-3\">\r\n                    <label htmlFor=\"brandFilter\" className=\"text-[9px] font-black uppercase tracking-widest text-slate-400\">Brand</label>\r\n                    <select\r\n                        id=\"brandFilter\"\r\n                        value={brandFilter}\r\n                        onChange={(e) => setBrandFilter(e.target.value)}\r\n                        className=\"p-3 pr-8 rounded-xl border border-slate-200 font-bold text-xs text-slate-700 bg-white focus:border-blue-600 outline-none transition-all\"\r\n                    >\r\n                        <option value=\"all\">All Manufacturers</option>\r\n                        {brands.map(b => <option key={b} value={b}>{b}</option>)}\r\n                    </select>\r\n                </div>\r\n\r\n                <div className=\"ml-auto text-[10px] font-black text-slate-300 uppercase tracking-widest\">\r\n                    Results: {filteredAssets.length}\r\n                </div>\r\n            </div>\r\n\r\n            {loading ? (\r\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {[1, 2, 3, 4, 5, 6].map(i => <div key={i} className=\"h-48 bg-white border border-slate-200 rounded-3xl animate-pulse\" />)}\r\n                </div>\r\n            ) : (\r\n                <div id=\"productGrid\" className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\r\n                    {filteredAssets.map((asset) => (\r\n                        <div key={asset.id} className={`group bg-white border p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all flex flex-col justify-between min-h-[240px] ${asset.verification_status === 'verified' ? 'border-slate-200' : 'border-amber-100'}`}>\r\n                            <div>\r\n                                <div className=\"flex justify-between items-start mb-4\">\r\n                                    <p className=\"text-[10px] font-black uppercase tracking-widest text-blue-600\">{asset.brand}</p>\r\n                                    {asset.verification_status === 'provisional' ? (\r\n                                        <span className=\"flex items-center gap-1.5 text-[8px] font-black bg-amber-50 text-amber-600 px-2 py-1 rounded border border-amber-200 uppercase tracking-widest\">\r\n                                            <span className=\"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse\"></span>\r\n                                            Provisional\r\n                                        </span>\r\n                                    ) : (\r\n                                        <span className=\"flex items-center gap-1.5 text-[8px] font-black bg-emerald-50 text-emerald-600 px-2 py-1 rounded border border-emerald-200 uppercase tracking-widest\">\r\n                                            <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"h-2.5 w-2.5\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\r\n                                                <path fillRule=\"evenodd\" d=\"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z\" clipRule=\"evenodd\" />\r\n                                            </svg>\r\n                                            Verified\r\n                                        </span>\r\n                                    )}\r\n                                </div>\r\n                                <h2 className=\"text-xl font-black text-slate-900 mb-1 leading-tight uppercase tracking-tight\">{asset.model_name}</h2>\r\n                                <p className=\"text-[9px] font-bold text-slate-400 uppercase tracking-widest\">{asset.category.replace(/_/g, ' ')}</p>\r\n                            </div>\r\n                            <Link href={`/specs/${asset.slug}`} className={`mt-6 inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] transition-all ${asset.verification_status === 'verified' ? 'text-slate-400 group-hover:text-blue-600' : 'text-amber-500 group-hover:text-amber-700'}`}>\r\n                                Forensic Audit <span className=\"text-sm font-normal\">→</span>\r\n                            </Link>\r\n                        </div>\r\n                    ))}\r\n                    {filteredAssets.length === 0 && (\r\n                        <div className=\"col-span-full py-24 text-center bg-slate-50 border-2 border-dashed border-slate-200 rounded-[3rem]\">\r\n                            <p className=\"text-[11px] font-black uppercase tracking-[0.2em] text-slate-400\">No assets detected in current status filter.</p>\r\n                            {statusTab === 'provisional' && (\r\n                                <Link href=\"/contribute\" className=\"mt-4 inline-block text-[10px] font-black uppercase text-blue-600 underline\">Add unverified asset →</Link>\r\n                            )}\r\n                        </div>\r\n                    )}\r\n                </div>\r\n            )}\r\n        </main>\r\n    );\r\n}\r\n\r\nexport default function SpecLedger() {\r\n    return (\r\n        <Suspense fallback={<div className=\"p-20 text-center\">Loading Inventory...</div>}>\r\n            <SpecLedgerContent />\r\n        </Suspense>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}