{"version":3,"sources":["../../../../components/ComparisonPicker.tsx","../../../../app/page.tsx"],"sourcesContent":["\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport { useRouter } from 'next/navigation';\r\nimport { listCategories, searchAssets, createProvisionalAsset } from '@/lib/dataBridge.client';\r\nimport { Asset, Category, ProductCategory } from '@/types';\r\n\r\nexport const AssetSelector: React.FC<{\r\n  category: ProductCategory;\r\n  onSelect: (asset: Asset) => void;\r\n  placeholder?: string;\r\n  className?: string;\r\n}> = ({ category, onSelect, placeholder = \"Search category assets\", className = \"\" }) => {\r\n  const [query, setQuery] = useState('');\r\n  const [isOpen, setIsOpen] = useState(false);\r\n  const [results, setResults] = useState<Asset[]>([]);\r\n  const [isSubmitting, setIsSubmitting] = useState(false);\r\n  const [error, setError] = useState<string | null>(null);\r\n  const containerRef = useRef<HTMLDivElement>(null);\r\n\r\n  useEffect(() => {\r\n    const handleClickOutside = (e: MouseEvent) => {\r\n      if (containerRef.current && !containerRef.current.contains(e.target as Node)) {\r\n        setIsOpen(false);\r\n      }\r\n    };\r\n    document.addEventListener('mousedown', handleClickOutside);\r\n    return () => document.removeEventListener('mousedown', handleClickOutside);\r\n  }, []);\r\n\r\n  useEffect(() => {\r\n    const search = async () => {\r\n      if (query.length > 1) {\r\n        const matches = await searchAssets(query, category);\r\n        setResults(matches);\r\n      } else {\r\n        setResults([]);\r\n      }\r\n    };\r\n    search();\r\n  }, [query, category]);\r\n\r\n  const handleProvisional = async () => {\r\n    setIsSubmitting(true);\r\n    setError(null);\r\n    const res = await createProvisionalAsset({ query, category });\r\n    if (res.ok && res.asset) {\r\n      onSelect(res.asset);\r\n    } else {\r\n      setError(res.error || \"Failed to create provisional asset.\");\r\n    }\r\n    setIsSubmitting(false);\r\n  };\r\n\r\n  return (\r\n    <div className={`relative w-full ${className}`} ref={containerRef}>\r\n      <input\r\n        type=\"text\"\r\n        value={query}\r\n        onFocus={() => setIsOpen(true)}\r\n        onChange={(e) => setQuery(e.target.value)}\r\n        placeholder={placeholder}\r\n        className=\"w-full p-4 bg-white border border-slate-200 rounded-xl text-sm font-bold text-slate-900 outline-none focus:border-blue-600 transition-all\"\r\n      />\r\n\r\n      {isOpen && (\r\n        <div className=\"absolute top-full left-0 right-0 z-50 mt-1 bg-white border border-slate-200 rounded-xl shadow-2xl overflow-hidden animate-in fade-in slide-in-from-top-1\">\r\n          <div className=\"max-h-60 overflow-y-auto\">\r\n            {results.length > 0 ? (\r\n              results.map(a => (\r\n                <button\r\n                  key={a.id}\r\n                  type=\"button\"\r\n                  onClick={() => {\r\n                    onSelect(a);\r\n                    setIsOpen(false);\r\n                  }}\r\n                  className=\"w-full p-4 text-left hover:bg-slate-50 flex items-center justify-between border-b border-slate-50 last:border-0 group\"\r\n                >\r\n                  <div>\r\n                    <span className=\"text-[9px] font-black text-slate-400 uppercase tracking-tighter mr-2\">{a.brand}</span>\r\n                    <span className=\"text-sm font-bold text-slate-900\">{a.model_name}</span>\r\n                  </div>\r\n                  <span className=\"text-[8px] font-black bg-emerald-50 text-emerald-600 px-1.5 py-0.5 rounded border border-emerald-100 uppercase group-hover:bg-emerald-500 group-hover:text-white transition-colors\">Indexed</span>\r\n                </button>\r\n              ))\r\n            ) : (\r\n              <div className=\"p-4 text-center\">\r\n                <p className=\"text-[10px] font-bold text-slate-300 uppercase italic\">\r\n                  {query.length > 1 ? \"Asset not indexed.\" : \"Enter search term...\"}\r\n                </p>\r\n              </div>\r\n            )}\r\n          </div>\r\n          {query.length > 2 && (\r\n            <button\r\n              type=\"button\"\r\n              onClick={handleProvisional}\r\n              disabled={isSubmitting}\r\n              className=\"w-full p-3 bg-slate-50 border-t border-slate-100 text-[10px] font-black text-slate-400 uppercase tracking-widest hover:bg-amber-50 hover:text-amber-600 transition-all text-center\"\r\n            >\r\n              {isSubmitting ? 'Validating...' : '+ Add unverified asset'}\r\n            </button>\r\n          )}\r\n          {error && <div className=\"p-2 text-[9px] font-bold text-red-500 bg-red-50 text-center uppercase\">{error}</div>}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nconst ComparisonPicker: React.FC = () => {\r\n  const [categories] = useState<Category[]>(listCategories());\r\n  const [selectedCategory, setSelectedCategory] = useState<ProductCategory>(() => {\r\n    // Check if window is defined (client-side)\r\n    if (typeof window !== 'undefined') {\r\n      return (sessionStorage.getItem('actual_fyi_last_category') as ProductCategory) || 'portable_power_station';\r\n    }\r\n    return 'portable_power_station';\r\n  });\r\n  const router = useRouter();\r\n\r\n  const handleCategoryChange = (e: React.ChangeEvent<HTMLSelectElement>) => {\r\n    const val = e.target.value as ProductCategory;\r\n    setSelectedCategory(val);\r\n    sessionStorage.setItem('actual_fyi_last_category', val);\r\n  };\r\n\r\n  return (\r\n    <section className=\"w-full max-w-2xl mx-auto px-4\">\r\n      <div className=\"p-8 md:p-12 bg-white border border-slate-200 rounded-[2.5rem] shadow-sm\">\r\n        <h2 className=\"text-lg font-black uppercase tracking-tighter mb-8 text-slate-900 text-center\">Initiate Forensic Audit</h2>\r\n\r\n        <div className=\"flex flex-col gap-4\">\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1\">Select Domain</label>\r\n            <select\r\n              value={selectedCategory}\r\n              onChange={handleCategoryChange}\r\n              className=\"w-full p-4 bg-slate-50 border-2 border-slate-100 rounded-xl text-sm font-bold text-slate-900 outline-none focus:border-blue-600 transition-all appearance-none\"\r\n            >\r\n              {categories.map(c => <option key={c.id} value={c.id}>{c.label}</option>)}\r\n            </select>\r\n          </div>\r\n\r\n          <div className=\"space-y-2\">\r\n            <label className=\"text-[9px] font-black text-slate-400 uppercase tracking-widest ml-1\">Search Asset</label>\r\n            <AssetSelector\r\n              category={selectedCategory}\r\n              onSelect={(asset) => router.push(`/specs/${asset.slug}?autoRun=true`)}\r\n              placeholder={`Search ${categories.find(c => c.id === selectedCategory)?.label}...`}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n      <div className=\"flex justify-center gap-6 mt-8\">\r\n        <p className=\"text-[9px] font-black text-slate-300 uppercase tracking-widest flex items-center gap-2\">\r\n          <span className=\"w-1.5 h-1.5 bg-emerald-500 rounded-full\"></span> Forensic Ledger Active\r\n        </p>\r\n        <p className=\"text-[9px] font-black text-slate-300 uppercase tracking-widest flex items-center gap-2\">\r\n          <span className=\"w-1.5 h-1.5 bg-blue-500 rounded-full animate-pulse\"></span> Cross-Category Protection On\r\n        </p>\r\n      </div>\r\n    </section>\r\n  );\r\n};\r\n\r\nexport default ComparisonPicker;\r\n","\"use client\";\r\n\r\nimport React from 'react';\r\nimport ComparisonPicker from '@/components/ComparisonPicker';\r\n\r\nconst Home: React.FC = () => {\r\n    return (\r\n        <div className=\"max-w-6xl mx-auto px-6 py-20\">\r\n            <div className=\"text-center mb-16\">\r\n                <div className=\"inline-flex items-center gap-2 bg-blue-50 border border-blue-100 px-4 py-1.5 rounded-full mb-6\">\r\n                    <span className=\"w-2 h-2 bg-blue-600 rounded-full animate-pulse\"></span>\r\n                    <p className=\"text-[10px] font-black uppercase tracking-[0.2em] text-blue-600\">Forensic Power Station Audit V1.0</p>\r\n                </div>\r\n                <h1 className=\"text-5xl md:text-8xl font-black uppercase tracking-tighter text-slate-900 leading-[0.85] mb-8\">\r\n                    The Watts They<br />\r\n                    <span className=\"text-slate-400\">Quietly Normalize.</span>\r\n                </h1>\r\n                <p className=\"text-lg text-slate-500 max-w-2xl mx-auto font-medium leading-relaxed\">\r\n                    Actual.fyi preserves technical integrity by cross-referencing portable power station claims\r\n                    against real-world discharge tests, owner troubleshooting logs, and FCC technical filings.\r\n                </p>\r\n            </div>\r\n\r\n            <ComparisonPicker />\r\n\r\n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-8 mt-32 border-t border-slate-100 pt-20\">\r\n                <div className=\"group p-2 rounded-[2.2rem] hover:bg-slate-900 transition-all duration-500\">\r\n                    <div className=\"bg-white border border-slate-200 p-10 rounded-[2rem] shadow-sm group-hover:border-slate-800\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-6 group-hover:text-blue-500 transition-colors\">Integrity Node 01</p>\r\n                        <p className=\"text-4xl font-black text-slate-900 mb-4\">Indexed</p>\r\n                        <p className=\"text-xs font-bold text-slate-500 leading-relaxed italic\">\r\n                            \"Power station assets undergo a 72-point forensic normalization before being listed as 'Verified' in our ledger.\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"group p-2 rounded-[2.2rem] hover:bg-slate-900 transition-all duration-500\">\r\n                    <div className=\"bg-white border border-slate-200 p-10 rounded-[2rem] shadow-sm group-hover:border-slate-800\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-6 group-hover:text-blue-500 transition-colors\">Integrity Node 02</p>\r\n                        <p className=\"text-4xl font-black text-blue-600 mb-4\">Synthesized</p>\r\n                        <p className=\"text-xs font-bold text-slate-500 leading-relaxed italic\">\r\n                            \"Unverified assets are synthesized live from community signals. High variance is expected until peer review is complete.\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n                <div className=\"group p-2 rounded-[2.2rem] hover:bg-slate-900 transition-all duration-500\">\r\n                    <div className=\"bg-white border border-slate-200 p-10 rounded-[2rem] shadow-sm group-hover:border-slate-800\">\r\n                        <p className=\"text-[10px] font-black uppercase tracking-widest text-slate-400 mb-6 group-hover:text-blue-500 transition-colors\">Integrity Node 03</p>\r\n                        <p className=\"text-4xl font-black text-slate-900 mb-4\">Forensic</p>\r\n                        <p className=\"text-xs font-bold text-slate-500 leading-relaxed italic\">\r\n                            \"Default to curated truth; allow explicit uncertainty. We prioritize technical reality over consumer hype cycles.\"\r\n                        </p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default Home;\r\n"],"names":[],"mappings":"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"}