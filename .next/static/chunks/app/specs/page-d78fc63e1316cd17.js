(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[421],{3309:(e,t,a)=>{Promise.resolve().then(a.bind(a,8715))},8715:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>d});var r=a(5155),l=a(2115),s=a(8173),i=a.n(s),n=a(6046),o=a(6973);function c(){let e=(0,n.useSearchParams)(),t=(0,n.useRouter)(),a=e.get("status")||"verified",[s,c]=(0,l.useState)([]),[d]=(0,l.useState)((0,o.d4)()),[u,x]=(0,l.useState)("all"),[p,b]=(0,l.useState)("all"),[m,h]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{h(!0),c(await (0,o.GU)("","all","all")),h(!1)})()},[]);let f=Array.from(new Set(s.map(e=>e.brand))).sort(),g=s.filter(e=>{let t="all"===u||e.brand===u,r="all"===p||e.category===p,l=e.verification_status===a;return t&&r&&l}),v=a=>{let r=new URLSearchParams(e.toString());r.set("status",a),t.push("/specs?".concat(r.toString()))};return(0,r.jsxs)("main",{className:"max-w-6xl mx-auto px-6 py-12",children:[(0,r.jsxs)("header",{className:"mb-12",children:[(0,r.jsx)(i(),{href:"/",className:"inline-block bg-slate-900 text-white px-3 py-1 rounded text-[9px] font-black uppercase tracking-[0.2em] mb-4 hover:bg-slate-700 transition-colors",children:"Actual.fyi"}),(0,r.jsx)("h1",{className:"text-4xl font-black uppercase tracking-tighter text-slate-900 leading-none mb-4",children:"Technical Inventory"}),(0,r.jsxs)("div",{className:"flex gap-4 border-b border-slate-200",children:[(0,r.jsxs)("button",{onClick:()=>v("verified"),className:"pb-4 text-[10px] font-black uppercase tracking-widest transition-all relative ".concat("verified"===a?"text-blue-600":"text-slate-400 hover:text-slate-600"),children:["Verified Ledger","verified"===a&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-blue-600 rounded-full"})]}),(0,r.jsxs)("button",{onClick:()=>v("provisional"),className:"pb-4 text-[10px] font-black uppercase tracking-widest transition-all relative ".concat("provisional"===a?"text-amber-600":"text-slate-400 hover:text-slate-600"),children:["Provisional Index","provisional"===a&&(0,r.jsx)("div",{className:"absolute bottom-0 left-0 right-0 h-1 bg-amber-600 rounded-full"})]})]})]}),(0,r.jsxs)("div",{className:"mb-12 flex flex-wrap items-center gap-6",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("label",{htmlFor:"catFilter",className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:"Category"}),(0,r.jsxs)("select",{id:"catFilter",value:p,onChange:e=>b(e.target.value),className:"p-3 pr-8 rounded-xl border border-slate-200 font-bold text-xs text-slate-700 bg-white focus:border-blue-600 outline-none transition-all",children:[(0,r.jsx)("option",{value:"all",children:"All Domains"}),d.map(e=>(0,r.jsx)("option",{value:e.id,children:e.label},e.id))]})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("label",{htmlFor:"brandFilter",className:"text-[9px] font-black uppercase tracking-widest text-slate-400",children:"Brand"}),(0,r.jsxs)("select",{id:"brandFilter",value:u,onChange:e=>x(e.target.value),className:"p-3 pr-8 rounded-xl border border-slate-200 font-bold text-xs text-slate-700 bg-white focus:border-blue-600 outline-none transition-all",children:[(0,r.jsx)("option",{value:"all",children:"All Manufacturers"}),f.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]})]}),(0,r.jsxs)("div",{className:"ml-auto text-[10px] font-black text-slate-300 uppercase tracking-widest",children:["Results: ",g.length]})]}),m?(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(e=>(0,r.jsx)("div",{className:"h-48 bg-white border border-slate-200 rounded-3xl animate-pulse"},e))}):(0,r.jsxs)("div",{id:"productGrid",className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[g.map(e=>(0,r.jsxs)("div",{className:"group bg-white border p-8 rounded-[2.5rem] shadow-sm hover:shadow-xl transition-all flex flex-col justify-between min-h-[240px] ".concat("verified"===e.verification_status?"border-slate-200":"border-amber-100"),children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"flex justify-between items-start mb-4",children:[(0,r.jsx)("p",{className:"text-[10px] font-black uppercase tracking-widest text-blue-600",children:e.brand}),"provisional"===e.verification_status?(0,r.jsxs)("span",{className:"flex items-center gap-1.5 text-[8px] font-black bg-amber-50 text-amber-600 px-2 py-1 rounded border border-amber-200 uppercase tracking-widest",children:[(0,r.jsx)("span",{className:"w-1.5 h-1.5 bg-amber-500 rounded-full animate-pulse"}),"Provisional"]}):(0,r.jsxs)("span",{className:"flex items-center gap-1.5 text-[8px] font-black bg-emerald-50 text-emerald-600 px-2 py-1 rounded border border-emerald-200 uppercase tracking-widest",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Verified"]})]}),(0,r.jsx)("h2",{className:"text-xl font-black text-slate-900 mb-1 leading-tight uppercase tracking-tight",children:e.model_name}),(0,r.jsx)("p",{className:"text-[9px] font-bold text-slate-400 uppercase tracking-widest",children:e.category.replace(/_/g," ")})]}),(0,r.jsxs)(i(),{href:"/specs/".concat(e.slug),className:"mt-6 inline-flex items-center gap-2 text-[10px] font-black uppercase tracking-[0.2em] transition-all ".concat("verified"===e.verification_status?"text-slate-400 group-hover:text-blue-600":"text-amber-500 group-hover:text-amber-700"),children:["Forensic Audit ",(0,r.jsx)("span",{className:"text-sm font-normal",children:"→"})]})]},e.id)),0===g.length&&(0,r.jsxs)("div",{className:"col-span-full py-24 text-center bg-slate-50 border-2 border-dashed border-slate-200 rounded-[3rem]",children:[(0,r.jsx)("p",{className:"text-[11px] font-black uppercase tracking-[0.2em] text-slate-400",children:"No assets detected in current status filter."}),"provisional"===a&&(0,r.jsx)(i(),{href:"/contribute",className:"mt-4 inline-block text-[10px] font-black uppercase text-blue-600 underline",children:"Add unverified asset →"})]})]})]})}function d(){return(0,r.jsx)(l.Suspense,{fallback:(0,r.jsx)("div",{className:"p-20 text-center",children:"Loading Inventory..."}),children:(0,r.jsx)(c,{})})}},6973:(e,t,a)=>{"use strict";a.d(t,{GU:()=>o,PK:()=>c,bD:()=>u,d4:()=>n,rG:()=>d});var r=a(4131),l=a(2818);let s=null;function i(){if(s)return s;let e=l.env.NEXT_PUBLIC_SUPABASE_URL,t=l.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;if(!e||!t)throw console.warn("Missing Supabase Client Env (NEXT_PUBLIC_SUPABASE_URL / NEXT_PUBLIC_SUPABASE_ANON_KEY). Inventory will be empty."),Error("Missing NEXT_PUBLIC_SUPABASE_URL or NEXT_PUBLIC_SUPABASE_ANON_KEY.");return s=(0,r.UU)(e,t)}let n=()=>[{id:"portable_power_station",label:"Portable Power Stations"},{id:"solar_generator_kit",label:"Solar Generator Kits"},{id:"solar_panel",label:"Solar Panels"},{id:"inverter",label:"Inverters"},{id:"battery",label:"Batteries"},{id:"charge_controller",label:"Charge Controllers"}],o=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all",a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"all";try{let r=i().from("products").select("*");"all"!==t&&(r=r.eq("category",t)),"all"!==a&&(r=r.eq("brand",a)),e&&e.trim().length>0&&(r=r.ilike("model_name","%".concat(e,"%")));let{data:l}=await r.limit(200);if(!l)return[];return l.map(e=>({...e,verified:e.is_audited,verification_status:e.is_audited?"verified":"provisional"}))}catch(e){return console.warn("Supabase search failed:",e),[]}},c=async e=>({ok:!1,error:"Asset creation is disabled in V1."}),d=async e=>{try{let t=i(),{data:a}=await t.from("products").select("*").eq("slug",e).maybeSingle();if(!a)return null;return{...a,verified:a.is_audited,verification_status:a.is_audited?"verified":"provisional"}}catch(e){return console.warn("Supabase fetch failed:",e),null}},u=async e=>{let t="string"==typeof e?e:e.slug;if(!t)throw Error("Missing slug for audit");let a=await fetch("/api/audit",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify({slug:t})}),r=await a.json();if(!r.ok||!r.audit)throw Error(r.error||"Audit failed");return r.audit}}},e=>{var t=t=>e(e.s=t);e.O(0,[130,173,441,517,358],()=>t(3309)),_N_E=e.O()}]);